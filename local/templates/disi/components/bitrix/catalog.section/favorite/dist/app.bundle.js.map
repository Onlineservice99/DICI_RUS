{"version":3,"file":"app.bundle.js","sources":["../src/script.js"],"sourcesContent":["import {Type} from 'main.core';\r\n\r\nexport class FavoritePage\r\n{\r\n\tconstructor(options = {})\r\n\t{\r\n\t\tthis.name = options.name;\r\n\t\tthis.initEventListener()\r\n\t}\r\n\r\n\tinitEventListener()\r\n\t{\r\n\t\tconst instance = this\r\n\t\t$('input[name=\"favorites[]\"]').on('change', function(e){\r\n\t\t\tinstance.updateCount();\r\n\t\t})\r\n\r\n\t\t$('#favorite-page-add-cart').on('click', function(e){\r\n\t\t\tlet arr = [];\r\n\t\t\t$('input[name=\"favorites[]\"]:checked').each(function(){\r\n\t\t\t\tarr.push($(this).val())\r\n\t\t\t})\r\n\t\t\tinstance.addCart(arr)\r\n\t\t})\r\n\r\n\t\t$('#favorite-page-remove').on('click', function(e){\r\n\t\t\tlet arr = [];\r\n\t\t\t$('input[name=\"favorites[]\"]:checked').each(function(){\r\n\t\t\t\tarr.push($(this).val())\r\n\t\t\t})\r\n\t\t\tinstance.removeFavorite(arr)\r\n\t\t})\r\n\r\n\t\tlet timeOut = null\r\n\t\t$('#favorite-page-filter').on('keyup', function(e){\r\n\t\t\tif (timeOut != null) {\r\n\t\t\t\tclearTimeout(timeOut)\r\n\t\t\t}\r\n\t\t\tlet str = $(this).val()\r\n\t\t\ttimeOut = setTimeout(function(e){\r\n\t\t\t\tinstance.filterElements(str)\r\n\t\t\t}, 500);\r\n\t\t})\r\n\t}\r\n\r\n\tupdateCount()\r\n\t{\r\n\t\tlet count = $('input[name=\"favorites[]\"]:checked').length\r\n\t\t$('.favorite-page-count').html(count);\r\n\t}\r\n\r\n\tfilterElements(str)\r\n\t{\r\n\t\t$.ajax({\r\n\t\t\turl: '/personal/favorite/',\r\n\t\t\tdata: {name: str},\r\n\t\t\tmethod: 'POST',\r\n\t\t\tsuccess: function(e) {\r\n\t\t\t\t$('#favorite-inner-elements').html(e.CONTENT)\r\n\t\t\t\t$('#favorite-inner-pages').html(e.PAGINATION)\r\n\r\n\t\t\t\tconsole.log(e)\r\n\r\n\t\t\t\tnew Meven.Components.FavoritePage()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\taddCart(arr)\r\n\t{\r\n\t\t$.ajax({\r\n\t\t\turl: '/local/ajax/api/basket/addelems.php',\r\n\t\t\tdata: {ids: arr},\r\n\t\t\tmethod: 'POST',\r\n\t\t\tsuccess: function() {\r\n\t\t\t\t$.fancybox.open('<div class=\"popup\"><h3>Элементы добавлены в корзину</h3></div>');\r\n\t\t\t\tBX.onCustomEvent(window, 'OnBasketChange');\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tremoveFavorite(arr)\r\n\t{\r\n\t\t$.ajax({\r\n\t\t\turl: '/local/ajax/api/favorite/removearr.php',\r\n\t\t\tdata: {ids: arr},\r\n\t\t\tmethod: 'POST',\r\n\t\t\tsuccess: function(e) {\r\n\t\t\t\t$('.icon-link--star .icon-link__count').html(e.count)\r\n\t\t\t\tlocation.reload()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tsetName(name)\r\n\t{\r\n\t\tif (Type.isString(name))\r\n\t\t{\r\n\t\t\tthis.name = name;\r\n\t\t}\r\n\t}\r\n\r\n\tgetName()\r\n\t{\r\n\t\treturn this.name;\r\n\t}\r\n\r\n}"],"names":["FavoritePage","options","name","initEventListener","instance","$","on","e","updateCount","arr","each","push","val","addCart","removeFavorite","timeOut","clearTimeout","str","setTimeout","filterElements","count","length","html","ajax","url","data","method","success","CONTENT","PAGINATION","console","log","Meven","Components","ids","fancybox","open","BX","onCustomEvent","window","location","reload","Type","isString"],"mappings":"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"}